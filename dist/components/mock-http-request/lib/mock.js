function MockHttpRequest(){this.error=!1,this.sent=!1,this.requestHeaders={},this.responseHeaders={}}function MockHttpServer(e){e&&(this.handle=e)}MockHttpRequest.prototype={statusReasons:{100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",507:"Insufficient Storage"},UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,readyState:0,open:function(e,t,s,r,o){if("string"!=typeof e)throw"INVALID_METHOD";switch(e.toUpperCase()){case"CONNECT":case"TRACE":case"TRACK":throw"SECURITY_ERR";case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"POST":case"PUT":e=e.toUpperCase()}if(this.method=e,"string"!=typeof t)throw"INVALID_URL";this.url=t,this.urlParts=this.parseUri(t),void 0===s&&(s=!0),this.async=s,this.user=r,this.password=o,this.readyState=this.OPENED,this.onreadystatechange()},setRequestHeader:function(e,t){switch(e=e.toLowerCase()){case"accept-charset":case"accept-encoding":case"connection":case"content-length":case"cookie":case"cookie2":case"content-transfer-encoding":case"date":case"expect":case"host":case"keep-alive":case"referer":case"te":case"trailer":case"transfer-encoding":case"upgrade":case"user-agent":case"via":return}if("proxy-"!==e.substr(0,6)&&"sec-"!==e.substr(0,4))if(void 0===this.requestHeaders[e])this.requestHeaders[e]=t;else{var s=this.requestHeaders[e];this.requestHeaders[e]=s+", "+t}},send:function(e){if(this.readyState!==this.OPENED||this.sent)throw"INVALID_STATE_ERR";"GET"!==this.method&&"HEAD"!==this.method||(e=null),this.error=!1,this.sent=!0,this.onreadystatechange(),this.requestText=e,this.onsend()},abort:function(){this.responseText=null,this.error=!0;for(var e in this.requestHeaders)delete this.requestHeaders[e];delete this.requestText,this.onreadystatechange(),this.onabort(),this.readyState=this.UNSENT},status:0,statusText:"",getResponseHeader:function(e){return this.readyState===this.UNSENT||this.readyState===this.OPENED||this.error?null:this.responseHeaders[e.toLowerCase()]},getAllResponseHeaders:function(){var e="";for(var t in this.responseHeaders)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+this.responseHeaders[t]+"\r\n");return e},responseText:"",responseXML:void 0,onload:function(){},onprogress:function(){},onerror:function(){},onabort:function(){},onreadystatechange:function(){},onsend:function(){},getRequestHeader:function(e){return this.requestHeaders[e.toLowerCase()]},setResponseHeader:function(e,t){this.responseHeaders[e.toLowerCase()]=t},makeXMLResponse:function(e){var t,s=this.getResponseHeader("Content-Type");if(s=s&&s.split(";",1)[0],null==s||"text/xml"==s||"application/xml"==s||s&&"+xml"==s.substring(s.length-4)){try{if(window.DOMParser){var r=new DOMParser;t=r.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(e){t=null}(t&&t.parseError&&0!=t.parseError.errorCode||t&&t.documentElement&&"parsererror"==t.documentElement.nodeName||t&&t.documentElement&&"html"==t.documentElement.nodeName&&t.documentElement.firstChild&&"body"==t.documentElement.firstChild.nodeName&&t.documentElement.firstChild.firstChild&&"parsererror"==t.documentElement.firstChild.firstChild.nodeName)&&(t=null)}else t=null;return t},receive:function(e,t){if(this.readyState!==this.OPENED||!this.sent)throw"INVALID_STATE_ERR";this.status=e,this.statusText=e+" "+this.statusReasons[e],this.readyState=this.HEADERS_RECEIVED,this.onprogress(),this.onreadystatechange(),this.responseText=t,this.responseXML=this.makeXMLResponse(t),this.readyState=this.LOADING,this.onprogress(),this.onreadystatechange(),this.readyState=this.DONE,this.onreadystatechange(),this.onprogress(),this.onload()},err:function(e){if(this.readyState!==this.OPENED||!this.sent)throw"INVALID_STATE_ERR";this.responseText=null,this.error=!0;for(var t in this.requestHeaders)delete this.requestHeaders[t];if(this.readyState=this.DONE,!this.async)throw e;this.onreadystatechange(),this.onerror()},authenticate:function(e,t){if(this.user)return e===this.user&&t===this.password;if(this.urlParts.user)return e===this.urlParts.user&&t===this.urlParts.password;var s=this.getRequestHeader("Authorization");if(void 0===s)return!1;if("Basic "!==s.substr(0,6))return!1;if("function"!=typeof atob)return!1;s=atob(s.substr(6));var r=s.split(":"),o=r.shift(),n=r.join(":");return e===o&&t===n},parseUri:function(e){for(var t=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r=/(?:^|&)([^&=]*)=?([^&]*)/g,o=t.exec(e),n={},i=14;i--;)n[s[i]]=o[i]||"";return n.queryKey={},n[s[12]].replace(r,function(e,t,s){t&&(n.queryKey[t]=s)}),n}},MockHttpServer.prototype={start:function(){function e(){this.onsend=function(){t.handle(this)},MockHttpRequest.apply(this,arguments)}var t=this;e.prototype=MockHttpRequest.prototype,window.OriginalHttpRequest=window.XMLHttpRequest,window.XMLHttpRequest=e},stop:function(){window.XMLHttpRequest=window.OriginalHttpRequest},handle:function(e){}};