<link rel="import" href="/components/polymer/polymer.html">
<link rel="import" href="/components/app-route/app-route.html">
<link rel="import" href="/components/iron-pages/iron-pages.html">
<link rel="import" href="/elements/recipe-form-page.html">

<!--
`recipe-router`


@demo demo/index.html
-->

<dom-module id="recipe-router">
  <template>
    <app-route
      route="{{route}}"
      pattern="/:recipeId"
      data="{{routeData}}"
      ></app-route>

      <iron-pages
          selected="[[page]]"
          attr-for-selected="name"
          fallback-selection="recipe">

        <recipe-page name="recipe" recipe-id="[[routeData.recipeId]]"></recipe-page>
        <recipe-form-page name="form" route="[[route]]"></recipe-form-page>
      </iron-pages>

  </template>

  <script>
    Polymer({
      is: 'recipe-router',
      properties: {
        route: Object,
        page: String
      },
      observers: ['_viewChanged(routeData.recipeId)',],
      _viewChanged: function(recipeId){
        if(!recipeId) return;

        if(recipeId === 'add' || recipeId === 'edit') {
          this.page = 'form';
        } else {
          this.page = 'recipe';
        }

      }
    });
  </script>
</dom-module>
